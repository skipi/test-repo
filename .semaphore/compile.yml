# .semaphore/production-deploy.yml
version: v1.0
name: Deploy to production
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Deploy
    task:
      prologue:
        commands:
          - sem-version go 1.15
          - "export GOPATH=~/go"
          - "export PATH=/home/semaphore/go/bin:$PATH"
          - checkout
      jobs:
        - name: 'Everything'
          commands:
            - make run
            - git add ./
            - git commit -m "new release"
            - git push origin master
